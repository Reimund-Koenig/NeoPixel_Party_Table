<!doctype html>
<html>
<head>
        <title>View</title>
        <link rel="stylesheet" type="text/css" href="/stylesheet.css">
        <meta name="description" content="Web view for LED table">
        <meta name="author" content="Reimund KÃ¶nig">
        <link rel="shortcut icon" href="/favicon.ico">
        <meta name="keywords" lang="de" content="
                                 virtual, view">
</head>
<body>
    <div class="borderdiv"></div>
    <div id="centerdiv">
        <div id="quarderdiv">
        </div>
        <!-- <div id="contentdiv">
            <ul id="messages"></ul>
            <form action="">
                <input id="m" autocomplete="off" /><button>Send</button>
            </form>

        </div> -->
    </div>
    <div class="borderdiv"></div>
    
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
        $(function () {
            var socket = io();
            $('form').submit(function(){
                console.log("Send Message: " + $('#m').val())
                socket.emit("msg", $('#m').val());
                $('#m').val('');
                return false;
            });
            socket.on('msg', function(msg){
                console.log("Receive Msg: " + msg);
            });
            socket.on('color', function(msg){
                color = rgbToHex(msg.r, msg.g, msg.b);
                setPixelColor(msg.x,msg.y,color);
            });
        });
    </script>

    <script>
        function setPixelColor(x,y,color) {
            coordinate_ID = x + '-' + y;
            elem = document.getElementById(coordinate_ID);
            elem.style.backgroundColor = color;
        }

        function rgbToHex(r, g, b) {
            var rgb = b | (g << 8) | (r << 16);
            return '#' + (0x1000000 + rgb).toString(16).slice(1)
        }
    </script>
     <script>
        var inner = "";
        var x;
        var y;
        for (y = 0; y < 15; y++) {
            inner += '<div id="row_'+x+'" class="quarder_row">';
            for (x = 0; x < 16; x++) {
                if (x % 2 == 0) {
                    if (y % 2 == 0) {
                        inner += '<div id="'+x+'-'+y+'" class="quarder1"></div>';
                    } else {
                        inner += '<div id="'+x+'-'+y+'" class="quarder2"></div>';
                    }
                } else {
                    if (y % 2 == 0) {
                        inner += '<div id="'+x+'-'+y+'" class="quarder2"></div>';
                    } else {
                        inner += '<div id="'+x+'-'+y+'" class="quarder1"></div>';
                    }
                }
            }
            inner += '</div>';
        }
        elem = document.getElementById("quarderdiv");
        // console.log(inner)
        elem.innerHTML = inner;
    </script>

</body>
</html>